[gd_scene load_steps=17 format=3 uid="uid://dnh43fnlxp16y"]

[ext_resource type="Script" uid="uid://dvecx31ncs2v0" path="res://dev/level_build/level_build_saver.gd" id="1_2nij2"]
[ext_resource type="Resource" uid="uid://dt7g5qlkaf63b" path="res://builder/saves/save.tres" id="2_fbuy2"]
[ext_resource type="Texture2D" uid="uid://c27aiw16v2f3p" path="res://builder/textures/prototype/black_check.png" id="3_buypi"]
[ext_resource type="PackedScene" uid="uid://b4f7jsiq2pegv" path="res://models/pillholder.glb" id="5_2nij2"]
[ext_resource type="PackedScene" uid="uid://be8wynol64aqq" path="res://dev/builder_controller.tscn" id="5_njel3"]
[ext_resource type="PackedScene" uid="uid://fhp36u1s8vu3" path="res://models/npc/cherub.glb" id="6_x033f"]
[ext_resource type="Script" uid="uid://cna3exdlqjqe" path="res://Scripts/cherub.gd" id="8_d3awe"]
[ext_resource type="PackedScene" uid="uid://b67n7nwr2o6nv" path="res://models/submarine1.glb" id="8_oho3u"]
[ext_resource type="Script" uid="uid://b22qaadlna68x" path="res://Scenes/enter_water.gd" id="9_d3awe"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_m60t6"]
sky_top_color = Color(0.703, 0.892367, 0.95, 1)
sky_horizon_color = Color(0.231309, 0.276744, 0.376138, 1)
sky_curve = 0.121838
ground_bottom_color = Color(0.0509776, 0.211052, 0.293949, 1)
ground_horizon_color = Color(0.231373, 0.278431, 0.376471, 1)
ground_curve = 0.211121

[sub_resource type="Sky" id="Sky_qallq"]
sky_material = SubResource("ProceduralSkyMaterial_m60t6")

[sub_resource type="Environment" id="Environment_j6ys2"]
background_mode = 2
sky = SubResource("Sky_qallq")
ssr_enabled = true
ssao_enabled = true
ssil_enabled = true
sdfgi_enabled = true

[sub_resource type="BoxShape3D" id="BoxShape3D_oho3u"]
size = Vector3(1, 1.91504, 1.37769)

[sub_resource type="NavigationMesh" id="NavigationMesh_d3awe"]
vertices = PackedVector3Array(-20.5, -1.95185, -4.25, -18.75, -1.95185, -4.5, -18, -1.95185, -5.5, -18, -1.95185, -149.5, -149.5, -1.95185, -149.5, -149.5, -1.95185, -2.75, -20.75, -1.95185, -2.75, -16, -1.95185, -3.75, -11, -1.95185, -5.5, -11.5, -1.95185, -5.75, -17, -1.95185, -5.5, -9.75, -1.95185, -7.75, -10, -1.95185, -149.5, -11.5, -1.95185, -7.5, -6, -1.95185, -7.75, -5.75, -1.95185, -149.5, -4.5, -1.95185, -7.75, -4.25, -1.95185, -6.5, 149.5, -1.95185, -6.5, 149.5, -1.95185, -149.5, -4.5, -1.95185, -5.5, -6.5, -1.95185, 149.5, 149.5, -1.95185, 149.5, -6.5, -1.95185, -5.5, -16, -1.95185, -3, -17.25, -1.95185, -2.5, -17.5, -1.95185, -1.75, -19, -1.95185, 149.5, -19, -1.95185, -1.5, -19.5, -1.05185, -2.75, -18.25, -1.10185, -2.75, -18.5, -1.10185, -3.5, -19.5, -1.10185, -3.25, -20.25, -1.95185, -1.75, -149.5, -1.95185, 149.5)
polygons = [PackedInt32Array(1, 0, 2), PackedInt32Array(2, 0, 5), PackedInt32Array(2, 5, 3), PackedInt32Array(3, 5, 4), PackedInt32Array(0, 6, 5), PackedInt32Array(8, 7, 9), PackedInt32Array(9, 7, 10), PackedInt32Array(11, 13, 12), PackedInt32Array(12, 13, 3), PackedInt32Array(10, 2, 9), PackedInt32Array(9, 2, 13), PackedInt32Array(13, 2, 3), PackedInt32Array(11, 12, 14), PackedInt32Array(14, 12, 15), PackedInt32Array(16, 14, 15), PackedInt32Array(16, 15, 17), PackedInt32Array(17, 15, 18), PackedInt32Array(18, 15, 19), PackedInt32Array(17, 18, 20), PackedInt32Array(20, 18, 22), PackedInt32Array(20, 22, 21), PackedInt32Array(21, 23, 20), PackedInt32Array(26, 25, 24), PackedInt32Array(24, 7, 8), PackedInt32Array(24, 8, 26), PackedInt32Array(26, 8, 23), PackedInt32Array(26, 23, 21), PackedInt32Array(26, 21, 27), PackedInt32Array(27, 28, 26), PackedInt32Array(32, 31, 29), PackedInt32Array(29, 31, 30), PackedInt32Array(33, 5, 6), PackedInt32Array(33, 28, 5), PackedInt32Array(5, 28, 27), PackedInt32Array(5, 27, 34)]
cell_height = 0.05

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_y4877"]
albedo_texture = ExtResource("3_buypi")
uv1_triplanar = true
uv1_world_triplanar = true
texture_filter = 2

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_yglu3"]
radius = 0.194317
height = 0.501879

[node name="BuildScene" type="Node3D" node_paths=PackedStringArray("target_parent")]
script = ExtResource("1_2nij2")
target_parent = NodePath("")
load_build = ExtResource("2_fbuy2")
current_build = ExtResource("2_fbuy2")
inventory_name = "Basic"
inventory_save_path = "res://builder/inventories"

[node name="Environment" type="Node" parent="."]

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="Environment"]
transform = Transform3D(-0.866024, -0.433016, 0.250001, 0, 0.499998, 0.866026, -0.500003, 0.749999, -0.43301, 0, 0, 0)
shadow_enabled = true

[node name="WorldEnvironment" type="WorldEnvironment" parent="Environment"]
environment = SubResource("Environment_j6ys2")

[node name="submarine1" parent="Environment" instance=ExtResource("8_oho3u")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.93666, -0.863238, -6.3622)

[node name="Area3D" type="Area3D" parent="Environment"]
script = ExtResource("9_d3awe")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Environment/Area3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4.02209, -1.06127, -6.71764)
shape = SubResource("BoxShape3D_oho3u")
debug_color = Color(1, 0, 0.164706, 0.270588)

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="Environment"]
navigation_mesh = SubResource("NavigationMesh_d3awe")

[node name="pillholder" parent="Environment/NavigationRegion3D" instance=ExtResource("5_2nij2")]
transform = Transform3D(-3.27835e-09, -0.075, 0, 0.075, -3.27835e-09, 0, 0, 0, 0.075, -17.9009, -1.57716, -3.06994)

[node name="pillholder2" parent="Environment/NavigationRegion3D" instance=ExtResource("5_2nij2")]
transform = Transform3D(0.0649519, 1.92296e-16, 0.0375, -2.22045e-16, 0.075, 0, -0.0375, -1.11022e-16, 0.0649519, -17.4998, -2.00401, -4.07904)

[node name="CSGBox3D" type="CSGBox3D" parent="Environment/NavigationRegion3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -7.90874, 3.4493, -6.54321)
layers = 65
use_collision = true
collision_layer = 65
size = Vector3(6.11121, 15.1023, 1)

[node name="Box" type="CSGBox3D" parent="Environment/NavigationRegion3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -2.51678, 0)
use_collision = true
collision_layer = 65
collision_mask = 0
size = Vector3(300, 1, 300)
material = SubResource("StandardMaterial3D_y4877")

[node name="BuilderController" parent="." node_paths=PackedStringArray("target_parent") instance=ExtResource("5_njel3")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 10.1058, -1.16681, -0.994766)
target_parent = NodePath("")
set_free = false

[node name="Cherub" type="CharacterBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4.98164, -2.01678, -1.07551)
script = ExtResource("8_d3awe")
wander_area = null
speed = null
wait_time_range = null

[node name="CollisionShape3D" type="CollisionShape3D" parent="Cherub"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.255816, 0)
shape = SubResource("CapsuleShape3D_yglu3")

[node name="cherub" parent="Cherub" instance=ExtResource("6_x033f")]

[node name="NavigationAgent3D" type="NavigationAgent3D" parent="Cherub"]
avoidance_enabled = true
use_3d_avoidance = true
debug_enabled = true

[node name="Timer" type="Timer" parent="Cherub"]

[connection signal="body_entered" from="Environment/Area3D" to="Environment/Area3D" method="_on_body_entered"]
[connection signal="body_exited" from="Environment/Area3D" to="Environment/Area3D" method="_on_body_exited"]
